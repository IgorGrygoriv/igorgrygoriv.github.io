<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab5</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <script>
      function handleSubmit() {
        event.preventDefault(); //this is so it doesnt automatically refresh the page when pressin submit
        var newPass = "";
        var formValid = true; //assuming the form is true
        var elements = document.getElementById("form").elements;

        for (let i = 0; i < elements.length; i++) { 
          
          if (elements[i].tagName === "INPUT") { //makes sure none of the fields are empty
            if (elements[i].value === "") {
              formValid = false;
              document.getElementById("alert").innerHTML =
                '<div class="alert alert-danger" role="alert" id="alert"> You cannot have any empty fields! </div>'; // if not found then sends the alert
              break;
            }
          }

          if (elements[i] === elements["passwordFORM"]) { 
            for (let j = 0; j < elements[i].value.length; j++) { // making the new "secure" password lol 
                newPass += "*";
              }

            let password = elements[i].value.split("");
            if (password.includes("!") || password.includes("?")) { // validating to make sure the right characters are in there 
              formValid = true;
              break;
            } else {
              document.getElementById("alert").innerHTML =
                '<div class="alert alert-danger" role="alert" id="alert"> Your password must contain a special character like "!" or "?" </div>'; // if not found then sends the alert
              formValid = false;
              break;
            }
          }
        }

        var User = {
          firstName: elements["firstNameFORM"].value,
          lastName: elements["lastNameFORM"].value,
          email: elements["emailFORM"].value,
          password: newPass,
          date: elements["dateFORM"].value,
        };
        if (formValid) { //if form is valid then output the user info 
          document.getElementById("alert").innerHTML = '<div class="alert alert-success" role="alert" id="alert"> Registration Success! </div>'; //success message 
          document.getElementById("firstName").innerText = User.firstName;
          document.getElementById("lastName").innerText = User.lastName;
          document.getElementById("email").innerText = User.email;
          document.getElementById("password").innerText = User.password;
          document.getElementById("date").innerText = User.date;
        }
      };
    </script>
  </head>
  <body>
    <div class="container-fluid">
      <div
        class="jumbotron bg-secondary mt-2 text-color-dark text-center p-3 rounded-4"
      >
        <h1>Store where you buy stuff!</h1>
      </div>
      <div class="row">
        <div
          class="col d-flex justify-content-center bg-light p-4 rounded-2 m-2"
        >
          <form id="form">
            <div class="mb-3 justify-content-center">
              <label for="firstName" class="form-label">First Name:</label>
              <input type="text" class="form-control" id="firstNameFORM" />
            </div>
            <div class="mb-3">
              <label for="lastName" class="form-label">Last Name:</label>
              <input type="text" class="form-control" id="lastNameFORM" />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email address:</label>
              <input type="email" class="form-control" id="emailFORM" />
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Password:</label>
              <input type="password" class="form-control" id="passwordFORM" />
            </div>
            <div class="mb-3">
              <label for="date" class="form-label">Date of Birth:</label>
              <input type="text" class="form-control" id="dateFORM" />
            </div>
            <button class="btn btn-primary" onclick="handleSubmit();">
              Submit
            </button>
          </form>
          <div class="m-3" id="alert"></div>
        </div>
        <div class="col m-2">
          <ul class="list-group">
            <li class="list-group-item">
              First Name:
              <p id="firstName"></p>
            </li>
            <li class="list-group-item">
              Last Name:
              <p id="lastName"></p>
            </li>
            <li class="list-group-item">
              Email:
              <p id="email"></p>
            </li>
            <li class="list-group-item">
              Password:
              <p id="password"></p>
            </li>
            <li class="list-group-item">
              Date:
              <div id="date"></div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
